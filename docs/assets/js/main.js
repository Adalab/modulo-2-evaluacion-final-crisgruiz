"use strict";const inputElement=document.querySelector(".js-input"),btnElement=document.querySelector(".js-searchBtn"),listElement=document.querySelector(".js-list"),favElement=document.querySelector(".js-favContainer");let shows=[],favorites=[];function handleGetToApi(){const e=inputElement.value.toLowerCase();fetch("https://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{shows=e.map(e=>e.show),paintSeries()})}function paintSeries(){let e="";const t=inputElement.value.toLowerCase();for(const s of shows){const i=s.name.toLowerCase();let n=GetImagesDefault(s);i.includes(t)&&(e+=`<li class="previewSerie js-series" id="${s.id}">`,e+=`<h3 class="previewSerie__title js-serieTitle">${s.name}</h3>`,e+=`<img class="previewSerie__img js-serieImg" src="${n}" class="">`,e+="</li>")}listElement.innerHTML=e,listenSeriesEvent()}function GetImagesDefault(e){return e.image?e.image.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text="+e.name}function GetImagesFav(e){return e.image?e.image.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text="+e.name}function listenSeriesEvent(){const e=document.querySelectorAll(".js-series");for(const t of e)t.addEventListener("click",handleFavorite)}function handleFavorite(e){const t=parseInt(e.currentTarget.id);console.log(t);const s=favorites.findIndex(e=>e.id===t);if(-1!==s)favorites.splice(s,1);else for(let e=0;e<shows.length;e++)t===shows[e].id&&favorites.push(shows[e]);paintFavorites()}function paintFavorites(){let e="";e+='<ul class = "favSerie">';for(const t of favorites){let s=GetImagesFav(t);e+=`<li class="favSerie-list js-favSeries" id="${t.id}">`,e+=`<h3 class="favSerie-list__title js-favSerieTitle">${t.name}</h3>`,e+=`<img class="favSerie-list__img js-favSerieImg" src="${s}" class="">`,e+="</li>"}e+="</ul>",favElement.innerHTML=e}btnElement.addEventListener("click",handleGetToApi);